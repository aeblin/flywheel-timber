// Make sure all of this only happens once the page is loaded.
jQuery(document).ready(function($) {

  // Search open/close in Header
  $(".js-search-toggle").click(function(){
  	$(".js-search-input").toggleClass("is-open");
  });

  // Submit Search Click
  $(".js-search-submit").click(function(){
    $(".js-search-form").submit();
  });

  // Open Mobile Nav
  $(".js-mobile-nav-toggle").click(function(){
    $(".navigation").toggleClass("is-open");
  })

  // Quantity Increment/Decrement for Product Page
  $(".js-qty-adjust").on("click", function() {
  	
    var $button = $(this);
    var oldValue = $(".js-qty-num").val();

    if ($button.hasClass("js-qty-adjust-plus")) {
  	  var newVal = parseFloat(oldValue) + 1;
  	} else {
     // Don't allow decrementing below one
      if (oldValue > 1) {
        var newVal = parseFloat(oldValue) - 1;
      } else {
        newVal = 1;
      }
    }

    $(".js-qty-num").val(newVal);
  });

  // Fade-in for images with class
  if($(".js-fadeIn").length) {
    setTimeout(function() {
      $(".js-fadeIn").addClass("fadeIn");  
    }, 500);   
  };

  // Open Cloak when mobile nav open
  $(".js-cloak").on("click", function() {
    timber.RightDrawer.close();
  });

  // Height Sync for Product Images
  var heightSet = $(".js-height-sync.product-details-container").height();
  if ($(window).width() > 991) {
    $(".js-height-sync.product-image").css('max-height', [(heightSet), 'px'].join(''));
    $(".js-height-sync.product-image").css('display', 'block');
  }

  // Smooth-Scroll for links with class
  $(function() {
    $('.js-smoothScroll').click(function() {
      if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        if (target.length) {
          $('html,body').animate({
            scrollTop: target.offset().top
          }, 500); // The number here represents the speed of the scroll in milliseconds
          return false;
        }
      }
    });
  });

});

// Except this, which we want to happen before the page loads.
$(".product-image").hide(0).delay(500).fadeIn('fast');  